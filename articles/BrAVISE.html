<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>How to use BrAVISE • shinybrapps</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How to use BrAVISE">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">shinybrapps</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">27.8</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-how-to" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">How to</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-how-to">
<li><a class="dropdown-item" href="../articles/load_data.html">Load data</a></li>
    <li><a class="dropdown-item" href="../articles/STABrAPP.html">Use STABrAPP</a></li>
    <li><a class="dropdown-item" href="../articles/BrAVISE.html">Use BrAVISE</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fa-newspaper-o"></span> news</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/IntegratedBreedingPlatform/ShinyBrAPPs/"><span class="fa fa-github fa-lg fab"></span> github</a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">

<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>How to use BrAVISE</h1>
            
      

      <div class="d-none name"><code>BrAVISE.Rmd</code></div>
    </div>

    
    
<p><strong>Decoding Data, Driving Decisions.</strong></p>
<p>BrAVISE is a Decision Support application that helps breeders to get the most of experimental data, especially in a multi-environments perspective, and turn it into breeding decisions.</p>
<div class="section level2">
<h2 id="loading-data">
<a href="load_data.html">Loading Data</a><a class="anchor" aria-label="anchor" href="#loading-data"></a>
</h2>
</div>
<div class="section level2">
<h2 id="application-components">Application components<a class="anchor" aria-label="anchor" href="#application-components"></a>
</h2>
<p>BrAVISE contains two main tabs corresponding to two different ways of analyzing the same dataset:</p>
<ul>
<li>GxE analysis: allows to run a large range of GxE analysis on observation data at the MEANS observation unit level. In other words, it performs the second stage of a two-stage analysis of multi-environment trials, once the first step was complete using STABrAPP. It is built on top of the <a href="https://biometris.github.io/statgenGxE/index.html" class="external-link">statgenGxE</a> package.</li>
<li>Correlate: allows to build complex scatter plots comparing variables at different observation levels, but also environment details, germplasm attributes and more.</li>
</ul>
<p>These two components of the BrAVISE app share a common third component to manage groups of germplasms that can be defined in various part of the application from analysis results or manual selection of genotypes. Groups of germplasms can be merged, intersect, saved or exported as germplasm list to a BMS instance.</p>
</div>
<div class="section level2">
<h2 id="gxe-analysis">GxE Analysis<a class="anchor" aria-label="anchor" href="#gxe-analysis"></a>
</h2>
<div class="section level3">
<h3 id="data-preparation">Data Preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h3>
<p>When the application has finished loading data, and before starting any analysis, the user needs to prepare data by providing different information. Mandatory information are the fields in red : Trait, Germplasm Level, and Variable to use as Environment Name.</p>
<p><img src="figures/bravise/data_preparation.png"></p>
<p>First you need to pick a trait as GxE analysis are conducted trait by trait. Indeed, as BrAVISE is an interactive application there is no way to launch here the same analysis on different traits in batch mode. In the Trait picker input, only MEANS variables are listed. By default those are variables that ends by <code>BLUEs</code> or <code>BLUPs</code> suffix (this can be changed by an app configuration parameter).</p>
<p>When the selected variable ends by BLUEs or BLUPs, the <code>Use weights</code> switch is automatically activated and the corresponding seBLUEs or seBLUPs variable is selected and a weight variable is defined as 1/seBLUEs^2 or 1/seBLUPS^2.</p>
<p>Then Germplasm level needs to be selected. It can be either GermplasmDbId or GermplasmName. Choosing one or the other may have an impact on the way genotypes will be aggregated in different environments. Indeed, you may have the same genotype that has been evaluated in different environments over locations or years with different germplasmDbIds (e.g. corresponding to different cycles of multiplication). In this case you may prefer to use GermplasmName as you want to consider different germplasms as corresponding to the same genotype in a GxE analysis perspective.</p>
<p>Lastly, you need to indicate which variable will be used to identify Environments. The variables listed here are the environment details that unambiguously distinguish between the different StudyDbIds. In case a more meaningfull variable containing environment names has been defined as environment detail in your BrAPI source, it is preferable to use it over studyDbId that is in general just a simple number.</p>
<p>When the 3 mandatory variables have been defined, boxplots of the trait distribution in the different environments are displayed.</p>
<p><img src="figures/bravise/data_preparation2.png"></p>
<p>From here, different options can be adjusted to fine tune the dataset before proceeding with analysis.</p>
<ul>
<li>Environments can be included or excluded from the Environments picker list</li>
<li>A minimum number of environments in which each germplasm must be present can be set. If the dataset is not fully balanced, increasing this value will trigger the exclusion of some genotypes that are not present in all environments. The lists of included and excluded geneotypes will be updated accordingly.</li>
<li>Optionally select environment details to be used as location, region, year, or environmental scenario. These may be used in some of the analyses especially the mixed model section.</li>
<li>Some germplasm attributes can also be selected here as variables used to color genotypes in different GxE plots.</li>
</ul>
</div>
<div class="section level3">
<h3 id="mixed-model">Mixed model<a class="anchor" aria-label="anchor" href="#mixed-model"></a>
</h3>
<p>Refer to <a href="https://biometris.github.io/statgenGxE/articles/statgenGxE.html#vcomp" target="_blank" class="external-link">statgenGxE</a> manual for detailed statistical background.</p>
</div>
<div class="section level3">
<h3 id="finlay-wilkinson">Finlay Wilkinson<a class="anchor" aria-label="anchor" href="#finlay-wilkinson"></a>
</h3>
<p>Refer to <a href="https://biometris.github.io/statgenGxE/articles/statgenGxE.html#fw" target="_blank" class="external-link">statgenGxE</a> manual for detailed statistical background.</p>
<p><img src="figures/bravise/fw1.png"></p>
<p>Click first on “Run FW Analysis”</p>
<div class="section level4">
<h4 id="plot-type">Plot type<a class="anchor" aria-label="anchor" href="#plot-type"></a>
</h4>
<p>Though the most common type of plots for Finlay-Wilkinson analysis is the “line” type (the default), three other types of plots are possible:</p>
<ul>
<li>scatter: creates three scatter plots where genotypic mean, square root of the mean squared deviation and sensitivity are plotted against each other.</li>
<li>trellis: creates a trellis plot with observations and slopes per genotype. The set of genotypes to display must be selected in the germplasm list table, under the plot.</li>
<li>scatterFit: creates a scatter plot of fitted values in the trial with the highest environmental effect against the fitted values in the trial with the lowest environmental effect.</li>
</ul>
<p><img src="figures/bravise/fw2.png"></p>
</div>
<div class="section level4">
<h4 id="color-genotypes-by">Color genotypes by<a class="anchor" aria-label="anchor" href="#color-genotypes-by"></a>
</h4>
<p>In all plots it is possible to color the genotypes by a variable that has been selected in the Data Preparation tab. If groups of germplasms have been created it is also possible to color germplasm based on these groups.</p>
<p><img src="figures/bravise/fw3.png"></p>
</div>
<div class="section level4">
<h4 id="clustering-of-genotypes">Clustering of genotypes<a class="anchor" aria-label="anchor" href="#clustering-of-genotypes"></a>
</h4>
<p>It is possible to cluster genotypes based on sensitivity or mean values (or both). To cluster genotypes, first select the number of clusters (from 2 to 8), select whether clustering must be done on sensitivity or geneotype means, or both together. Then select a clustering method (kmeans or hclust) and click “Make clusters”.</p>
</div>
<div class="section level4">
<h4 id="plot-interaction">Plot interaction<a class="anchor" aria-label="anchor" href="#plot-interaction"></a>
</h4>
<p>The line plot has the following interaction features:</p>
<ul>
<li>Hover mouse next to a line: this will display the genotype name is the right upper corner grey zone</li>
<li>Click on a line or a point: this will select (highlight) the corresponding genotype in the plot and in the germplasm list table</li>
<li>Double-click anywhere in the plot: will deselect everything</li>
<li>Selecting/deselecting a row in the germplasm list table: this is equivalent to clicking a line in the plot</li>
</ul>
<p>Plot options:</p>
<ul>
<li>Equal axes on line plot: by default the line plot has equivalent scales on x and y axes. In some cases it is useful to deacivate this option to make a wider plot and better distinguish environments with close means.</li>
<li>Plot also non fitted values on selected genotypes: when one or more genotypes are highlighted it is possible to also display the points of observed values in additionn to fitted value (like in the trellis plot). This allow to vizualise the quality of FW model for a given genotypes but is quickly difficult to read when the number of selected genotypes is important.</li>
</ul>
</div>
<div class="section level4">
<h4 id="create-groups">Create groups<a class="anchor" aria-label="anchor" href="#create-groups"></a>
</h4>
</div>
<div class="section level4">
<h4 id="report">Report<a class="anchor" aria-label="anchor" href="#report"></a>
</h4>
</div>
</div>
<div class="section level3">
<h3 id="gge">GGE<a class="anchor" aria-label="anchor" href="#gge"></a>
</h3>
<p>Reference manual on <a href="https://biometris.github.io/statgenGxE/articles/statgenGxE.html#gge" target="_blank" class="external-link">statgenGxE</a></p>
</div>
<div class="section level3">
<h3 id="ammi">AMMI<a class="anchor" aria-label="anchor" href="#ammi"></a>
</h3>
<p>Reference manual on <a href="https://biometris.github.io/statgenGxE/articles/statgenGxE.html#am" target="_blank" class="external-link">statgenGxE</a></p>
</div>
<div class="section level3">
<h3 id="stability">Stability<a class="anchor" aria-label="anchor" href="#stability"></a>
</h3>
</div>
</div>
<div class="section level2">
<h2 id="correlate">Correlate<a class="anchor" aria-label="anchor" href="#correlate"></a>
</h2>
</div>
<div class="section level2">
<h2 id="groups">Groups<a class="anchor" aria-label="anchor" href="#groups"></a>
</h2>
</div>
  </main><aside class="col-md-3">
    <img src="../figures/stickers/bravise.png" height="200"/>
    <nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jean-François Rami, Alice Boizet, Léo Valette, Mariano Crimi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
